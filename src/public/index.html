<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🇳🇴 Norwegian Game Stats</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>🇳🇴 Norwegian Game Stats</h1>
        <p>Real-time player counts for Norwegian-made games on Steam.</p>
    </header>

    <main>
        <section id="global-stats">
            <div class="stat-item">
                <span id="total-players" class="stat-value">-</span>
                <span class="stat-label">Total Players Now</span>
            </div>
            <div class="stat-item">
                <span id="top-game" class="stat-value">-</span>
                <span class="stat-label">Top Game</span>
            </div>
            <div class="stat-item">
                <span id="peak-record" class="stat-value">-</span>
                <span class="stat-label">All-Time Peak</span>
            </div>
            <div class="stat-item">
                <span id="total-games" class="stat-value">-</span>
                <span class="stat-label">Games Tracked</span>
            </div>
        </section>

        <div class="layout-container">
            <aside class="sidebar">
                <section id="leaderboards">
                    <div class="card leaderboard-card">
                        <h2>Top Projects</h2>
                        <div class="tabs">
                            <button class="tab-btn active" onclick="switchTab('current')">Current Players</button>
                            <button class="tab-btn" onclick="switchTab('peak')">All-Time Peak</button>
                            <button class="tab-btn" onclick="switchTab('sales')">Est. Owners</button>
                        </div>
                        
                        <div id="current-tab" class="tab-content active">
                            <table id="current-leaderboard">
                                <thead>
                                    <tr>
                                        <th class="rank-cell">#</th>
                                        <th>Game</th>
                                        <th class="count-cell">Players</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                        <div id="peak-tab" class="tab-content">
                            <table id="peak-leaderboard">
                                <thead>
                                    <tr>
                                        <th class="rank-cell">#</th>
                                        <th>Game</th>
                                        <th class="count-cell">Peak</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>

                        <div id="sales-tab" class="tab-content">
                            <table id="sales-leaderboard">
                                <thead>
                                    <tr>
                                        <th class="rank-cell">#</th>
                                        <th>Game</th>
                                        <th class="count-cell">Est. Owners</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                            <p class="methodology-note">* Owners are estimated using a dynamic multiplier based on release year, price, genre, and total reviews (Boxleiter method). This provides a more accurate estimation across different game types and eras.</p>
                        </div>
                    </div>
                </section>
            </aside>

            <div class="main-content">
                <section id="charts">
                    <div class="card">
                        <h2>Analytics Dashboard</h2>
                        
                        <div id="controls">
                            <div class="control-group">
                                <label>Time Period</label>
                                <select id="time-range-type">
                                    <option value="24h">Last 24 Hours</option>
                                    <option value="7d">Last 7 Days</option>
                                    <option value="30d" selected>Last 30 Days</option>
                                    <option value="custom">Custom Range</option>
                                </select>
                                <div id="custom-range-inputs" style="display: none; margin-top: 10px;">
                                    <input type="datetime-local" id="start-date">
                                    <span>to</span>
                                    <input type="datetime-local" id="end-date">
                                </div>
                            </div>

                            <div class="control-group">
                                <label>Compare Projects</label>
                                <select id="compare-selector">
                                    <option value="" disabled selected>Add game to compare...</option>
                                </select>
                                <div id="comparison-list" class="comparison-tags">
                                    <!-- Selected projects will appear as tags here -->
                                </div>
                            </div>

                            <div class="control-actions" id="comparison-actions" style="display: none;">
                                <button id="clear-comparison-btn" class="secondary">Reset Comparison</button>
                            </div>
                        </div>
                    </div>

                    <div id="comparison-section" class="card chart-section" style="display: none;">
                        <h3>Comparison Analysis</h3>
                        <div class="chart-container">
                            <canvas id="comparison-chart"></canvas>
                        </div>
                    </div>

                    <div class="search-container">
                        <input type="text" id="game-search" placeholder="Search games or studios...">
                    </div>

                    <div id="individual-charts-grid" class="chart-grid">
                        <!-- Individual charts will be injected here -->
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer>
        <p>Data provided by Steam Web API. Similar to SteamDB.</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>
